{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nfunction CustomerComponent_tr_53_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵtext(10);\n    i0.ɵɵpipe(11, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"td\");\n    i0.ɵɵtext(13);\n    i0.ɵɵpipe(14, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"td\");\n    i0.ɵɵtext(16);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"td\")(18, \"button\", 18);\n    i0.ɵɵlistener(\"click\", function CustomerComponent_tr_53_Template_button_click_18_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r3);\n      const customer_r1 = restoredCtx.$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.deleteCustomer(customer_r1.id));\n    });\n    i0.ɵɵtext(19, \"Eliminar\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const customer_r1 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(customer_r1.id);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(customer_r1.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(customer_r1.tel);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(customer_r1.email);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(11, 7, customer_r1.lastVisitDate));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(14, 9, customer_r1.nextVisitDate));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(customer_r1.note);\n  }\n}\nexport class CustomerComponent {\n  constructor(http) {\n    this.http = http;\n    this.apiUrl = 'http://localhost:8080/api/cliente';\n    this.customers = [];\n    this.newCustomer = {\n      id: 0,\n      name: '',\n      tel: '',\n      email: '',\n      lastVisitDate: new Date(),\n      nextVisitDate: new Date(),\n      note: ''\n    };\n    this.selectedCustomerId = null;\n  }\n  ngOnInit() {\n    this.getCustomers();\n  }\n  getCustomers() {\n    this.http.get(this.apiUrl).subscribe(customers => {\n      this.customers = customers;\n    });\n  }\n  saveCustomer() {\n    this.http.post(this.apiUrl, this.newCustomer).subscribe(customer => {\n      this.customers.push(customer);\n      this.newCustomer = {\n        id: 0,\n        name: '',\n        tel: '',\n        email: '',\n        lastVisitDate: new Date(),\n        nextVisitDate: new Date(),\n        note: ''\n      };\n    });\n  }\n  deleteCustomer(id) {\n    this.selectedCustomerId = id;\n    if (confirm(\"¿Estás seguro de que deseas eliminar este cliente?\")) {\n      this.performDelete();\n    } else {\n      this.selectedCustomerId = null;\n      console.log(\"Eliminación cancelOpticaCentroCrud-Frontendlada\");\n    }\n  }\n  performDelete() {\n    if (this.selectedCustomerId !== null) {\n      this.http.delete(`${this.apiUrl}/${this.selectedCustomerId}`).subscribe(() => {\n        this.customers = this.customers.filter(customer => customer.id !== this.selectedCustomerId);\n        this.getCustomers(); // Actualizar la lista de clientes después de la eliminación\n      });\n\n      this.selectedCustomerId = null;\n      console.log(\"Cliente eliminado\");\n    }\n  }\n}\nCustomerComponent.ɵfac = function CustomerComponent_Factory(t) {\n  return new (t || CustomerComponent)(i0.ɵɵdirectiveInject(i1.HttpClient));\n};\nCustomerComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: CustomerComponent,\n  selectors: [[\"app-customer\"]],\n  decls: 55,\n  vars: 7,\n  consts: [[3, \"submit\"], [\"for\", \"name\"], [\"type\", \"text\", \"id\", \"name\", \"name\", \"name\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"tel\"], [\"type\", \"text\", \"id\", \"tel\", \"name\", \"tel\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"email\"], [\"type\", \"email\", \"id\", \"email\", \"name\", \"email\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"lastVisitDate\"], [\"type\", \"date\", \"id\", \"lastVisitDate\", \"name\", \"lastVisitDate\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"netxVisitDate\"], [\"type\", \"date\", \"id\", \"netxVisitDate\", \"name\", \"nextVisitDate\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"note\"], [\"id\", \"note\", \"name\", \"note\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\"], [1, \"table-responsive-md\"], [1, \"table\", \"table-bordered\"], [1, \"thead-dark\"], [4, \"ngFor\", \"ngForOf\"], [1, \"btn\", \"btn-danger\", 3, \"click\"]],\n  template: function CustomerComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"h2\");\n      i0.ɵɵtext(1, \"Agregar cliente\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(2, \"form\", 0);\n      i0.ɵɵlistener(\"submit\", function CustomerComponent_Template_form_submit_2_listener() {\n        return ctx.saveCustomer();\n      });\n      i0.ɵɵelementStart(3, \"label\", 1);\n      i0.ɵɵtext(4, \"Nombre:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"input\", 2);\n      i0.ɵɵlistener(\"ngModelChange\", function CustomerComponent_Template_input_ngModelChange_5_listener($event) {\n        return ctx.newCustomer.name = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(6, \"br\");\n      i0.ɵɵelementStart(7, \"label\", 3);\n      i0.ɵɵtext(8, \"Tel:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(9, \"input\", 4);\n      i0.ɵɵlistener(\"ngModelChange\", function CustomerComponent_Template_input_ngModelChange_9_listener($event) {\n        return ctx.newCustomer.tel = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(10, \"br\");\n      i0.ɵɵelementStart(11, \"label\", 5);\n      i0.ɵɵtext(12, \"Email:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(13, \"input\", 6);\n      i0.ɵɵlistener(\"ngModelChange\", function CustomerComponent_Template_input_ngModelChange_13_listener($event) {\n        return ctx.newCustomer.email = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(14, \"br\");\n      i0.ɵɵelementStart(15, \"label\", 7);\n      i0.ɵɵtext(16, \"Ultima visita:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(17, \"input\", 8);\n      i0.ɵɵlistener(\"ngModelChange\", function CustomerComponent_Template_input_ngModelChange_17_listener($event) {\n        return ctx.newCustomer.lastVisitDate = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(18, \"br\");\n      i0.ɵɵelementStart(19, \"label\", 9);\n      i0.ɵɵtext(20, \"Proxima:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(21, \"input\", 10);\n      i0.ɵɵlistener(\"ngModelChange\", function CustomerComponent_Template_input_ngModelChange_21_listener($event) {\n        return ctx.newCustomer.nextVisitDate = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(22, \"br\");\n      i0.ɵɵelementStart(23, \"label\", 11);\n      i0.ɵɵtext(24, \"Notas:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(25, \"textarea\", 12);\n      i0.ɵɵlistener(\"ngModelChange\", function CustomerComponent_Template_textarea_ngModelChange_25_listener($event) {\n        return ctx.newCustomer.note = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(26, \"br\");\n      i0.ɵɵelementStart(27, \"button\", 13);\n      i0.ɵɵtext(28, \"Guardar\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelement(29, \"br\");\n      i0.ɵɵelementStart(30, \"div\", 14)(31, \"table\", 15)(32, \"caption\");\n      i0.ɵɵtext(33, \"Datos de cliente\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(34, \"thead\", 16)(35, \"tr\")(36, \"th\");\n      i0.ɵɵtext(37, \"ID\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(38, \"th\");\n      i0.ɵɵtext(39, \"Nombre\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(40, \"th\");\n      i0.ɵɵtext(41, \"Tel\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(42, \"th\");\n      i0.ɵɵtext(43, \"Email\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(44, \"th\");\n      i0.ɵɵtext(45, \"Ultima visita\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(46, \"th\");\n      i0.ɵɵtext(47, \"Proxima\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(48, \"th\");\n      i0.ɵɵtext(49, \"Notas\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(50, \"th\");\n      i0.ɵɵtext(51, \"Acciones\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(52, \"tbody\");\n      i0.ɵɵtemplate(53, CustomerComponent_tr_53_Template, 20, 11, \"tr\", 17);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelement(54, \"hr\");\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngModel\", ctx.newCustomer.name);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngModel\", ctx.newCustomer.tel);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngModel\", ctx.newCustomer.email);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngModel\", ctx.newCustomer.lastVisitDate);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngModel\", ctx.newCustomer.nextVisitDate);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngModel\", ctx.newCustomer.note);\n      i0.ɵɵadvance(28);\n      i0.ɵɵproperty(\"ngForOf\", ctx.customers);\n    }\n  },\n  dependencies: [i2.NgForOf, i3.ɵNgNoValidate, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgControlStatusGroup, i3.RequiredValidator, i3.NgModel, i3.NgForm, i2.DatePipe],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["i0","CustomerComponent","constructor","http","id","name","tel","email","lastVisitDate","Date","nextVisitDate","note","ngOnInit","getCustomers","get","apiUrl","subscribe","customers","saveCustomer","post","newCustomer","customer","push","deleteCustomer","selectedCustomerId","confirm","performDelete","console","log","delete","filter","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["/home/marco/Documents/Developer/opticaCentro/opticaCentro/src/app/home/customer.component.html","/home/marco/Documents/Developer/opticaCentro/opticaCentro/src/app/home/customer.component.ts"],"sourcesContent":["\n\n<!-- Agregando -->\n<h2>Agregar cliente</h2>\n<form (submit)=\"saveCustomer()\">\n\t<label for=\"name\">Nombre:</label>\n\n\t<input type=\"text\" id=\"name\" name=\"name\" [(ngModel)]=\"newCustomer.name\"\n\t\trequired>\n\n\t<br>\n\n\t<label for=\"tel\">Tel:</label>\n\t<input type=\"text\" id=\"tel\" name=\"tel\" [(ngModel)]=\"newCustomer.tel\" required>\n\n\t<br>\n\n\t<label for=\"email\">Email:</label>\n\t<input type=\"email\" id=\"email\" name=\"email\" [(ngModel)]=\"newCustomer.email\"\n\t\trequired>\n\n\t<br>\n\t<label for=\"lastVisitDate\">Ultima visita:</label>\n\t<input type=\"date\" id=\"lastVisitDate\" name=\"lastVisitDate\"\n\t\t[(ngModel)]=\"newCustomer.lastVisitDate\" required>\n\t<br>\n\t<label for=\"netxVisitDate\">Proxima:</label>\n\t<input type=\"date\" id=\"netxVisitDate\" name=\"nextVisitDate\"\n\t\t[(ngModel)]=\"newCustomer.nextVisitDate\" required>\n\t<br>\n\t<label for=\"note\">Notas:</label>\n\t<textarea id=\"note\" name=\"note\" [(ngModel)]=\"newCustomer.note\"></textarea>\n\t<br>\n\t<button class=\"btn btn-primary\" type=\"submit\">Guardar</button>\n</form>\n<br>\n\n<!-- lista de todos los clientes -->\n<div class=\"table-responsive-md\">\n\t<table class=\"table table-bordered\">\n\n\t\t<caption>Datos de cliente</caption>\n\t\t<thead class=\"thead-dark\">\n\t\t\t<tr>\n\t\t\t\t<th>ID</th>\n\t\t\t\t<th>Nombre</th>\n\t\t\t\t<th>Tel</th>\n\t\t\t\t<th>Email</th>\n\t\t\t\t<th>Ultima visita</th>\n\t\t\t\t<th>Proxima</th>\n\t\t\t\t<th>Notas</th>\n\t\t\t\t<th>Acciones</th>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<tr *ngFor=\"let customer of customers\">\n\t\t\t\t<td>{{ customer.id }}</td>\n\t\t\t\t<td>{{ customer.name }}</td>\n\t\t\t\t<td>{{ customer.tel }}</td>\n\t\t\t\t<td>{{ customer.email }}</td>\n\t\t\t\t<td>{{ customer.lastVisitDate | date }}</td>\n\t\t\t\t<td>{{ customer.nextVisitDate | date }}</td>\n\t\t\t\t<td>{{ customer.note }}</td>\n\t\t\t\t<td>\n\t\t\t\t\t<button class=\"btn btn-danger\" (click)=\"deleteCustomer(customer.id)\">Eliminar</button>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t</tbody>\n\t</table>\n</div>\n\n<hr>\n","import { Component, OnInit } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\n\n\ninterface Customer {\n  id: number;\n  name: string;\n  tel: string;\n  email: string;\n  lastVisitDate: Date;\n  nextVisitDate: Date;\n  note: string;\n}\n\n@Component({\n  selector: 'app-customer',\n  templateUrl: './customer.component.html',\n  styleUrls: ['./customer.component.css']\n})\nexport class CustomerComponent implements OnInit {\n  apiUrl = 'http://localhost:8080/api/cliente';\n  customers: Customer[] = [];\n  newCustomer: Customer = {\n    id: 0,\n    name: '',\n    tel: '',\n    email: '',\n    lastVisitDate: new Date(),\n    nextVisitDate: new Date(),\n    note: ''\n  };\n\n  \n  selectedCustomerId: number | null = null; \n  constructor(private http: HttpClient) { }\n\n  ngOnInit(): void {\n    this.getCustomers();\n  }\n\n  getCustomers(): void {\n    this.http.get<Customer[]>(this.apiUrl).subscribe(customers => {\n      this.customers = customers;\n    });\n  }\n\n  saveCustomer(): void {\n    this.http.post<Customer>(this.apiUrl, this.newCustomer).subscribe(customer => {\n      this.customers.push(customer);\n      this.newCustomer = {\n        id: 0,\n        name: '',\n        tel: '',\n        email: '',\n        lastVisitDate: new Date(),\n        nextVisitDate: new Date(),\n        note: ''\n      };\n    });\n  }\n\n  deleteCustomer(id: number): void {\n    this.selectedCustomerId = id;\n    if (confirm(\"¿Estás seguro de que deseas eliminar este cliente?\")) {\n      this.performDelete();\n    } else {\n      this.selectedCustomerId = null;\n      console.log(\"Eliminación cancelOpticaCentroCrud-Frontendlada\");\n    }\n  }\n\n  performDelete(): void {\n    if (this.selectedCustomerId !== null) {\n      this.http.delete<void>(`${this.apiUrl}/${this.selectedCustomerId}`).subscribe(() => {\n        this.customers = this.customers.filter(customer => customer.id !== this.selectedCustomerId);\n        this.getCustomers(); // Actualizar la lista de clientes después de la eliminación\n      });\n      this.selectedCustomerId = null;\n      console.log(\"Cliente eliminado\");\n    }\n  }\n  \n}\n\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}